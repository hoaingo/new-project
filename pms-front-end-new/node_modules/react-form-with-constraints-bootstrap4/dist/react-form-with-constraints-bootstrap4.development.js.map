{"version":3,"file":"react-form-with-constraints-bootstrap4.development.js","sources":["../src/Bootstrap4.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\n\nimport {\n  Input, FormWithConstraintsChildContext,\n  FieldFeedbacks as FieldFeedbacks_, FieldFeedbacksProps\n} from 'react-form-with-constraints';\n\nexport interface FormGroupProps extends React.HTMLAttributes<HTMLDivElement> {\n  for?: string;\n}\n\nexport class FormGroup extends React.Component<FormGroupProps> {\n  static contextTypes = {\n    form: PropTypes.object.isRequired\n  };\n  context: FormWithConstraintsChildContext;\n\n  constructor(props: FormGroupProps) {\n    super(props);\n    this.reRender = this.reRender.bind(this);\n  }\n\n  componentWillMount() {\n    this.context.form.addValidateEventListener(this.reRender);\n  }\n\n  componentWillUnmount() {\n    this.context.form.removeValidateEventListener(this.reRender);\n  }\n\n  reRender(input: Input) {\n    const fieldName = this.props.for;\n    if (input.name === fieldName) { // Ignore the event if it's not for us\n      this.forceUpdate();\n    }\n  }\n\n  className(fieldName: string | undefined) {\n    let className = 'form-group';\n    if (fieldName !== undefined) {\n      const form = this.context.form;\n      if (form.fieldsStore.containErrors(fieldName)) {\n        className += ' has-danger';\n      }\n      else if (form.fieldsStore.containWarnings(fieldName)) {\n        className += ' has-warning';\n      }\n      else if (form.fieldsStore.areValidDirtyWithoutWarnings(fieldName)) {\n        className += ' has-success';\n      }\n    }\n    return className;\n  }\n\n  render() {\n    const { for: fieldName, className, children, ...divProps } = this.props;\n    const classes = className !== undefined ? `${className} ${this.className(fieldName)}` : this.className(fieldName);\n    return (\n      <div {...divProps} className={classes}>{children}</div>\n    );\n  }\n}\n\n\nexport interface FormControlLabelProps extends React.LabelHTMLAttributes<HTMLLabelElement> {}\n\nconst FormControlLabel: React.SFC<FormControlLabelProps> = props => {\n  const { className, children, ...labelProps } = props;\n  const classes = className !== undefined ? `${className} form-control-label` : 'form-control-label';\n  return (\n    <label {...labelProps} className={classes}>{children}</label>\n  );\n};\nexport { FormControlLabel };\n\n\nexport interface FormControlInputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  innerRef?: React.Ref<HTMLInputElement>;\n}\n\nexport class FormControlInput extends React.Component<FormControlInputProps> {\n  static contextTypes = {\n    form: PropTypes.object.isRequired\n  };\n  context: FormWithConstraintsChildContext;\n\n  constructor(props: FormControlInputProps) {\n    super(props);\n    this.reRender = this.reRender.bind(this);\n  }\n\n  componentWillMount() {\n    this.context.form.addValidateEventListener(this.reRender);\n  }\n\n  componentWillUnmount() {\n    this.context.form.removeValidateEventListener(this.reRender);\n  }\n\n  reRender(input: Input) {\n    const fieldName = this.props.name;\n    if (input.name === fieldName) { // Ignore the event if it's not for us\n      this.forceUpdate();\n    }\n  }\n\n  className(name: string | undefined) {\n    let className = 'form-control';\n    if (name !== undefined) {\n      const form = this.context.form;\n      if (form.fieldsStore.containErrors(name)) {\n        className += ' form-control-danger';\n      }\n      else if (form.fieldsStore.containWarnings(name)) {\n        className += ' form-control-warning';\n      }\n      else if (form.fieldsStore.areValidDirtyWithoutWarnings(name)) {\n        className += ' form-control-success';\n      }\n    }\n    return className;\n  }\n\n  render() {\n    const { innerRef, className, children, ...inputProps } = this.props;\n    const classes = className !== undefined ? `${className} ${this.className(inputProps.name)}` : this.className(inputProps.name);\n    return (\n      <input ref={innerRef} {...inputProps} className={classes} />\n    );\n  }\n}\n\n\nconst FieldFeedbacks: React.SFC<FieldFeedbacksProps> = props => {\n  const { className, children, ...other } = props;\n  const classes = className !== undefined ? `${className} form-control-feedback` : 'form-control-feedback';\n  return <FieldFeedbacks_ {...other} className={classes}>{children}</FieldFeedbacks_>;\n};\nexport { FieldFeedbacks };\n\n\nexport interface LabelWithFormControlStyleProps extends React.LabelHTMLAttributes<HTMLLabelElement> {\n  for: string[];\n}\n\nexport class LabelWithFormControlStyle extends React.Component<LabelWithFormControlStyleProps> {\n  static contextTypes = {\n    form: PropTypes.object.isRequired\n  };\n  context: FormWithConstraintsChildContext;\n\n  constructor(props: LabelWithFormControlStyleProps) {\n    super(props);\n    this.reRender = this.reRender.bind(this);\n  }\n\n  componentWillMount() {\n    this.context.form.addValidateEventListener(this.reRender);\n  }\n\n  componentWillUnmount() {\n    this.context.form.removeValidateEventListener(this.reRender);\n  }\n\n  reRender(input: Input) {\n    const fieldNames = this.props.for;\n    if (fieldNames.includes(input.name)) { // Ignore the event if it's not for us\n      this.forceUpdate();\n    }\n  }\n\n  render() {\n    const { for: fieldNames, style, children, ...labelProps } = this.props;\n    const form = this.context.form;\n\n    // See https://github.com/twbs/bootstrap/blob/v4.0.0-alpha.6/scss/_variables.scss#L118\n    const brandDanger = '#d9534f';\n    const brandWarning = '#f0ad4e';\n    const brandSuccess = '#5cb85c';\n\n    let color: string | undefined;\n    if (form.fieldsStore.containErrors(...fieldNames)) {\n      color = brandDanger;\n    }\n    else if (form.fieldsStore.containWarnings(...fieldNames)) {\n      color = brandWarning;\n    }\n    else if (form.fieldsStore.areValidDirtyWithoutWarnings(...fieldNames)) {\n      color = brandSuccess;\n    }\n\n    const styles = style !== undefined ? {color, ...style} : {color};\n\n    return (\n      <label {...labelProps} style={styles}>{children}</label>\n    );\n  }\n}\n"],"names":["tslib_1.__extends","React.createElement","PropTypes.object","React.Component","FieldFeedbacks","FieldFeedbacks_"],"mappings":"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"}